<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevPrep - Progressive Hint System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0a0118 0%, #1a0f2e 50%, #0f0a1e 100%);
            color: #e5e5ff;
            min-height: 100vh;
            padding: 40px 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background */
        body::before {
            content: '';
            position: absolute;
            width: 150%;
            height: 150%;
            background:
                radial-gradient(circle at 20% 30%, rgba(120, 119, 198, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 119, 198, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(120, 219, 255, 0.1) 0%, transparent 50%);
            animation: backgroundFlow 20s ease-in-out infinite;
            z-index: 0;
        }

        @keyframes backgroundFlow {
            0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.9; }
            50% { transform: translate(-20px, 20px) scale(1.05); opacity: 0.95; }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
        }

        /* Question Section (context) */
        .question-section {
            background: rgba(20, 15, 40, 0.85);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 24px;
            backdrop-filter: blur(20px);
            box-shadow:
                0 0 60px rgba(120, 119, 198, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .question-title {
            font-size: 22px;
            font-weight: 700;
            color: #e5e5ff;
            margin-bottom: 16px;
        }

        .question-content {
            font-size: 15px;
            line-height: 1.7;
            color: rgba(229, 229, 255, 0.85);
        }

        /* Answer Editor (context) */
        .answer-editor {
            background: rgba(20, 15, 40, 0.85);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 24px;
            backdrop-filter: blur(20px);
            box-shadow:
                0 0 60px rgba(120, 119, 198, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .editor-label {
            font-size: 14px;
            font-weight: 600;
            color: rgba(229, 229, 255, 0.7);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .char-count {
            font-size: 12px;
            color: rgba(229, 229, 255, 0.5);
        }

        .char-count.valid {
            color: #00ff88;
        }

        .code-editor {
            background: rgba(10, 1, 24, 0.6);
            border: 1px solid rgba(120, 119, 198, 0.2);
            border-radius: 12px;
            padding: 16px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            color: #e5e5ff;
            min-height: 120px;
            line-height: 1.6;
        }

        /* Hint Button (Collapsed State) */
        .hint-button-wrapper {
            margin-bottom: 24px;
        }

        .hint-btn {
            width: 100%;
            padding: 18px 24px;
            background: linear-gradient(135deg, rgba(120, 119, 198, 0.2) 0%, rgba(255, 119, 198, 0.15) 100%);
            border: 1px solid rgba(120, 119, 198, 0.4);
            border-radius: 16px;
            color: #e5e5ff;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .hint-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }

        .hint-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .hint-btn:hover {
            border-color: rgba(120, 119, 198, 0.6);
            box-shadow:
                0 8px 30px rgba(120, 119, 198, 0.3),
                0 0 40px rgba(255, 119, 198, 0.2);
            transform: translateY(-2px);
        }

        .hint-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .hint-btn:disabled:hover {
            box-shadow: none;
        }

        .hint-icon {
            font-size: 20px;
            position: relative;
            z-index: 1;
        }

        .hint-text {
            position: relative;
            z-index: 1;
        }

        .hint-count {
            position: relative;
            z-index: 1;
            padding: 4px 12px;
            background: rgba(120, 119, 198, 0.3);
            border-radius: 20px;
            font-size: 13px;
            margin-left: auto;
        }

        .hint-loading {
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Hints Panel (Expanded State) */
        .hints-panel {
            background: rgba(20, 15, 40, 0.85);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 24px;
            backdrop-filter: blur(20px);
            box-shadow:
                0 0 60px rgba(120, 119, 198, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: slideDown 0.4s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
                max-height: 0;
            }
            to {
                opacity: 1;
                transform: translateY(0);
                max-height: 1000px;
            }
        }

        .hints-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .hints-title {
            font-size: 20px;
            font-weight: 700;
            background: linear-gradient(90deg, #7877c6 0%, #ff77c6 50%, #78dbff 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientFlow 6s linear infinite;
        }

        @keyframes gradientFlow {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }

        .close-hints-btn {
            width: 32px;
            height: 32px;
            border-radius: 10px;
            background: rgba(120, 119, 198, 0.15);
            border: 1px solid rgba(120, 119, 198, 0.3);
            color: #e5e5ff;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-hints-btn:hover {
            background: rgba(120, 119, 198, 0.25);
            transform: scale(1.05);
        }

        .hints-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Individual Hint Card */
        .hint-card {
            padding: 20px;
            border-radius: 16px;
            border: 1px solid;
            background: rgba(120, 119, 198, 0.05);
            animation: fadeInUp 0.5s ease-out both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hint-card:nth-child(1) { animation-delay: 0.1s; }
        .hint-card:nth-child(2) { animation-delay: 0.2s; }
        .hint-card:nth-child(3) { animation-delay: 0.3s; }

        .hint-card.level-1 {
            border-color: rgba(120, 219, 255, 0.4);
            box-shadow: 0 0 20px rgba(120, 219, 255, 0.1);
        }

        .hint-card.level-2 {
            border-color: rgba(255, 119, 198, 0.4);
            box-shadow: 0 0 20px rgba(255, 119, 198, 0.1);
        }

        .hint-card.level-3 {
            border-color: rgba(120, 119, 198, 0.4);
            box-shadow: 0 0 20px rgba(120, 119, 198, 0.1);
        }

        .hint-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .hint-level-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .level-1 .hint-level-badge {
            background: rgba(120, 219, 255, 0.2);
            color: #78dbff;
            border: 1px solid rgba(120, 219, 255, 0.4);
        }

        .level-2 .hint-level-badge {
            background: rgba(255, 119, 198, 0.2);
            color: #ff77c6;
            border: 1px solid rgba(255, 119, 198, 0.4);
        }

        .level-3 .hint-level-badge {
            background: rgba(120, 119, 198, 0.2);
            color: #7877c6;
            border: 1px solid rgba(120, 119, 198, 0.4);
        }

        .hint-timestamp {
            font-size: 12px;
            color: rgba(229, 229, 255, 0.5);
            margin-left: auto;
        }

        .hint-content {
            font-size: 14px;
            line-height: 1.7;
            color: rgba(229, 229, 255, 0.9);
        }

        .hint-content code {
            background: rgba(10, 1, 24, 0.6);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            color: #78dbff;
        }

        .hint-content pre {
            background: rgba(10, 1, 24, 0.6);
            border: 1px solid rgba(120, 119, 198, 0.2);
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
            overflow-x: auto;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
        }

        /* Encouragement Message */
        .encouragement {
            text-align: center;
            padding: 16px;
            background: rgba(0, 255, 136, 0.05);
            border: 1px solid rgba(0, 255, 136, 0.2);
            border-radius: 12px;
            color: rgba(229, 229, 255, 0.8);
            font-size: 14px;
            margin-top: 20px;
        }

        .encouragement-icon {
            font-size: 20px;
            margin-bottom: 8px;
        }

        /* Get Next Hint Button */
        .get-next-hint-btn {
            width: 100%;
            padding: 14px 24px;
            background: linear-gradient(135deg, #7877c6 0%, #ff77c6 100%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #ffffff;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 0 30px rgba(120, 119, 198, 0.3);
        }

        .get-next-hint-btn:hover {
            transform: translateY(-2px);
            box-shadow:
                0 8px 30px rgba(120, 119, 198, 0.4),
                0 0 40px rgba(255, 119, 198, 0.3);
        }

        .get-next-hint-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Warning Message */
        .hint-warning {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 16px;
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            margin-top: 12px;
            font-size: 13px;
            color: rgba(229, 229, 255, 0.8);
        }

        .warning-icon {
            font-size: 18px;
        }

        /* Info Box */
        .info-box {
            padding: 16px;
            background: rgba(120, 119, 198, 0.1);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 12px;
            margin-top: 24px;
            font-size: 13px;
            color: rgba(229, 229, 255, 0.7);
            line-height: 1.6;
        }

        .info-box strong {
            color: #e5e5ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Question Context -->
        <div class="question-section">
            <h2 class="question-title">Two Sum Problem</h2>
            <div class="question-content">
                Given an array of integers <code>nums</code> and an integer <code>target</code>,
                return indices of the two numbers such that they add up to <code>target</code>.
                You may assume that each input would have exactly one solution.
            </div>
        </div>

        <!-- Answer Editor -->
        <div class="answer-editor">
            <div class="editor-label">
                <span>Your Answer</span>
                <span class="char-count" id="charCount">0 characters</span>
            </div>
            <div class="code-editor" contenteditable="true" id="codeEditor" oninput="updateCharCount()">
// Start typing your solution here...
            </div>
        </div>

        <!-- Hint Button (Collapsed State) - Initially Visible -->
        <div class="hint-button-wrapper" id="hintButtonWrapper">
            <button class="hint-btn" id="hintBtn" onclick="requestHint()" disabled>
                <span class="hint-icon">💡</span>
                <span class="hint-text">Get Hint</span>
                <span class="hint-count" id="hintCount">0/3 used</span>
            </button>
            <div class="info-box" id="minCharsInfo">
                <strong>💡 Hint:</strong> Type at least 50 characters before requesting a hint.
                This encourages you to think through the problem first!
            </div>
        </div>

        <!-- Hints Panel (Expanded State) - Initially Hidden -->
        <div class="hints-panel" id="hintsPanel" style="display: none;">
            <div class="hints-header">
                <h3 class="hints-title">Progressive Hints</h3>
                <button class="close-hints-btn" onclick="closeHints()">×</button>
            </div>

            <div class="hints-list" id="hintsList">
                <!-- Hints will be dynamically added here -->
            </div>

            <button class="get-next-hint-btn" id="nextHintBtn" onclick="requestNextHint()" style="display: none;">
                Get Next Hint (Level <span id="nextLevel">2</span>)
            </button>

            <div class="hint-warning" id="lastHintWarning" style="display: none;">
                <span class="warning-icon">⚠️</span>
                <span>This is your last hint! Use it wisely.</span>
            </div>

            <div class="encouragement" id="encouragement" style="display: none;">
                <div class="encouragement-icon">🌟</div>
                <div>You've got this! Apply the hints above and give it another try.</div>
            </div>
        </div>
    </div>

    <script>
        let hintsUsed = 0;
        const maxHints = 3;
        const minCharsForHint = 50;
        let currentLevel = 0;
        let charCount = 0;

        const hints = [
            {
                level: 1,
                title: "General Approach",
                content: "Think about how you might organize data to quickly look up values. What data structure provides O(1) lookup time and could help you find the complement of each number efficiently?"
            },
            {
                level: 2,
                title: "Specific Technique",
                content: "A hash map would be ideal here because it provides O(1) lookup time. As you iterate through the array, you can store each number with its index. For each number, check if <code>target - current_number</code> exists in your hash map. This allows you to solve the problem in a single pass."
            },
            {
                level: 3,
                title: "Code Skeleton",
                content: `Here's the structure to get you started:

<pre>function twoSum(nums, target) {
    // Initialize hash map to store number -> index
    const map = new Map();

    // Iterate through array
    for (let i = 0; i < nums.length; i++) {
        // Calculate complement
        const complement = target - nums[i];

        // Check if complement exists in map
        if (map.has(complement)) {
            // Return indices
            return [map.get(complement), i];
        }

        // Store current number and index
        map.set(nums[i], i);
    }

    // Handle edge case
    return [];
}</pre>

Now fill in the logic and make sure you understand each step!`
            }
        ];

        function updateCharCount() {
            const editor = document.getElementById('codeEditor');
            charCount = editor.textContent.trim().length;
            const charCountEl = document.getElementById('charCount');
            const hintBtn = document.getElementById('hintBtn');

            charCountEl.textContent = `${charCount} characters`;

            // Enable hint button if enough characters
            if (charCount >= minCharsForHint) {
                charCountEl.classList.add('valid');
                hintBtn.disabled = hintsUsed >= maxHints;
                document.getElementById('minCharsInfo').style.display = 'none';
            } else {
                charCountEl.classList.remove('valid');
                hintBtn.disabled = true;
                document.getElementById('minCharsInfo').style.display = 'block';
            }
        }

        function requestHint() {
            if (hintsUsed >= maxHints || charCount < minCharsForHint) return;

            // Show loading state
            const hintBtn = document.getElementById('hintBtn');
            hintBtn.classList.add('hint-loading');
            hintBtn.disabled = true;

            // Simulate API call
            setTimeout(() => {
                addHint(hintsUsed);
                hintsUsed++;
                currentLevel++;
                updateHintState();

                // Show hints panel
                document.getElementById('hintButtonWrapper').style.display = 'none';
                document.getElementById('hintsPanel').style.display = 'block';

                hintBtn.classList.remove('hint-loading');
            }, 1000);
        }

        function requestNextHint() {
            if (hintsUsed >= maxHints) return;

            const nextHintBtn = document.getElementById('nextHintBtn');
            nextHintBtn.classList.add('hint-loading');
            nextHintBtn.disabled = true;

            setTimeout(() => {
                addHint(hintsUsed);
                hintsUsed++;
                currentLevel++;
                updateHintState();
                nextHintBtn.classList.remove('hint-loading');
            }, 1000);
        }

        function addHint(index) {
            const hint = hints[index];
            const hintsList = document.getElementById('hintsList');

            const hintCard = document.createElement('div');
            hintCard.className = `hint-card level-${hint.level}`;
            hintCard.innerHTML = `
                <div class="hint-header">
                    <span class="hint-level-badge">Level ${hint.level}: ${hint.title}</span>
                    <span class="hint-timestamp">${new Date().toLocaleTimeString()}</span>
                </div>
                <div class="hint-content">${hint.content}</div>
            `;

            hintsList.appendChild(hintCard);
        }

        function updateHintState() {
            const hintCountEl = document.getElementById('hintCount');
            const nextHintBtn = document.getElementById('nextHintBtn');
            const nextLevelEl = document.getElementById('nextLevel');
            const lastHintWarning = document.getElementById('lastHintWarning');
            const encouragement = document.getElementById('encouragement');

            hintCountEl.textContent = `${hintsUsed}/${maxHints} used`;

            if (hintsUsed < maxHints) {
                nextHintBtn.style.display = 'block';
                nextHintBtn.disabled = false;
                nextLevelEl.textContent = currentLevel + 1;

                // Show warning on second hint (before last)
                if (hintsUsed === maxHints - 1) {
                    lastHintWarning.style.display = 'flex';
                }
            } else {
                nextHintBtn.style.display = 'none';
                lastHintWarning.style.display = 'none';
                encouragement.style.display = 'block';
            }
        }

        function closeHints() {
            document.getElementById('hintsPanel').style.display = 'none';
            document.getElementById('hintButtonWrapper').style.display = 'block';

            const hintBtn = document.getElementById('hintBtn');
            if (hintsUsed >= maxHints) {
                hintBtn.disabled = true;
                hintBtn.querySelector('.hint-text').textContent = 'No Hints Remaining';
            } else if (charCount >= minCharsForHint) {
                hintBtn.disabled = false;
            }
        }

        // Initialize
        updateCharCount();
    </script>
</body>
</html>

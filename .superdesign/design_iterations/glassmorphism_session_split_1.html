<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevPrep - Practice Session with Smart Assist</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0a0118 0%, #1a0f2e 50%, #0f0a1e 100%);
            color: #e5e5ff;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background */
        body::before {
            content: '';
            position: fixed;
            width: 150%;
            height: 150%;
            background:
                radial-gradient(circle at 20% 30%, rgba(120, 119, 198, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 119, 198, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(120, 219, 255, 0.1) 0%, transparent 50%);
            animation: backgroundFlow 20s ease-in-out infinite;
            z-index: 0;
        }

        @keyframes backgroundFlow {
            0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.9; }
            50% { transform: translate(-20px, 20px) scale(1.05); opacity: 0.95; }
        }

        /* Status Bar */
        .status-bar {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(10, 1, 24, 0.95);
            border-bottom: 1px solid rgba(120, 119, 198, 0.3);
            padding: 16px 24px;
            backdrop-filter: blur(20px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .status-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 24px;
        }

        .progress-section {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .progress-dots {
            display: flex;
            gap: 8px;
        }

        .progress-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(120, 119, 198, 0.3);
            transition: all 0.3s ease;
        }

        .progress-dot.completed {
            background: #00ff88;
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        .progress-dot.current {
            background: #7877c6;
            box-shadow: 0 0 15px rgba(120, 119, 198, 0.8);
            animation: pulseGlow 2s ease-in-out infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.8; }
        }

        .progress-text {
            font-size: 14px;
            color: rgba(229, 229, 255, 0.8);
        }

        .timer-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .timer {
            font-size: 18px;
            font-weight: 700;
            color: #e5e5ff;
            font-variant-numeric: tabular-nums;
        }

        .timer.warning {
            color: #ffd700;
            animation: timerPulse 1s ease-in-out infinite;
        }

        .timer.critical {
            color: #ff77c6;
            animation: timerPulse 0.5s ease-in-out infinite;
        }

        @keyframes timerPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* Main Container */
        .container {
            position: relative;
            z-index: 1;
            max-width: 100%;
            margin: 0 auto;
            padding: 24px;
            display: grid;
            grid-template-columns: minmax(320px, 25%) 1fr;
            gap: 20px;
            height: calc(100vh - 100px);
        }

        /* Question Panel */
        .question-panel {
            display: flex;
            flex-direction: column;
            gap: 16px;
            overflow-y: auto;
            height: 100%;
            padding-right: 8px;
        }

        .question-card {
            background: rgba(20, 15, 40, 0.85);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 16px;
            padding: 20px;
            backdrop-filter: blur(20px);
            box-shadow:
                0 0 60px rgba(120, 119, 198, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        /* Custom scrollbar for question panel */
        .question-panel::-webkit-scrollbar {
            width: 8px;
        }

        .question-panel::-webkit-scrollbar-track {
            background: rgba(120, 119, 198, 0.1);
            border-radius: 4px;
        }

        .question-panel::-webkit-scrollbar-thumb {
            background: rgba(120, 119, 198, 0.3);
            border-radius: 4px;
        }

        .question-panel::-webkit-scrollbar-thumb:hover {
            background: rgba(120, 119, 198, 0.5);
        }

        .question-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .question-number {
            font-size: 14px;
            color: rgba(229, 229, 255, 0.7);
        }

        .difficulty-badge {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            background: rgba(255, 119, 198, 0.2);
            border: 1px solid rgba(255, 119, 198, 0.4);
            color: #ff77c6;
        }

        .question-title {
            font-size: 18px;
            font-weight: 700;
            color: #e5e5ff;
            margin-bottom: 12px;
            line-height: 1.3;
        }

        .question-content {
            font-size: 13px;
            line-height: 1.7;
            color: rgba(229, 229, 255, 0.85);
            margin-bottom: 16px;
        }

        .question-content code {
            background: rgba(120, 119, 198, 0.15);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            color: #78dbff;
        }

        .question-section {
            margin-top: 16px;
        }

        .section-title {
            font-size: 12px;
            font-weight: 600;
            color: rgba(229, 229, 255, 0.7);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .constraints-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .constraints-list li {
            padding-left: 16px;
            position: relative;
            font-size: 12px;
            color: rgba(229, 229, 255, 0.75);
            line-height: 1.5;
        }

        .constraints-list li::before {
            content: '•';
            position: absolute;
            left: 0;
            color: #7877c6;
            font-weight: bold;
        }

        .example-box {
            background: rgba(120, 119, 198, 0.05);
            border: 1px solid rgba(120, 119, 198, 0.2);
            border-radius: 8px;
            padding: 12px;
            margin-top: 8px;
        }

        .example-box code {
            display: block;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 11px;
            line-height: 1.5;
            color: rgba(229, 229, 255, 0.9);
        }

        /* Answer Panel - NO SCROLLING */
        .answer-panel {
            display: flex;
            flex-direction: column;
            gap: 16px;
            height: 100%;
            overflow: hidden;
        }

        .editor-card {
            background: rgba(20, 15, 40, 0.85);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 20px;
            padding: 24px;
            backdrop-filter: blur(20px);
            box-shadow:
                0 0 60px rgba(120, 119, 198, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .editor-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .editor-label {
            font-size: 14px;
            font-weight: 600;
            color: rgba(229, 229, 255, 0.9);
        }

        .language-badge {
            padding: 4px 12px;
            background: rgba(120, 119, 198, 0.2);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 12px;
            font-size: 12px;
            color: rgba(229, 229, 255, 0.8);
        }

        .code-editor {
            flex: 1;
            min-height: 400px;
            background: rgba(10, 1, 24, 0.6);
            border: 1px solid rgba(120, 119, 198, 0.2);
            border-radius: 12px;
            padding: 20px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            color: #e5e5ff;
            line-height: 1.6;
            overflow-y: auto;
            resize: vertical;
        }

        .code-editor:focus {
            outline: none;
            border-color: rgba(120, 119, 198, 0.5);
            box-shadow: 0 0 20px rgba(120, 119, 198, 0.2);
        }

        .editor-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 12px;
            font-size: 12px;
            color: rgba(229, 229, 255, 0.6);
        }

        /* Hints Section (in left panel) */
        .hints-card {
            background: rgba(20, 15, 40, 0.85);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 16px;
            padding: 16px;
            backdrop-filter: blur(20px);
            box-shadow:
                0 0 60px rgba(120, 119, 198, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .hints-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .hints-title {
            font-size: 13px;
            font-weight: 700;
            background: linear-gradient(90deg, #7877c6 0%, #ff77c6 50%, #78dbff 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientFlow 6s linear infinite;
        }

        .hint-btn {
            width: 100%;
            padding: 10px 16px;
            background: linear-gradient(135deg, rgba(120, 119, 198, 0.2) 0%, rgba(255, 119, 198, 0.15) 100%);
            border: 1px solid rgba(120, 119, 198, 0.4);
            border-radius: 10px;
            color: #e5e5ff;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .hint-btn:hover:not(:disabled) {
            border-color: rgba(120, 119, 198, 0.6);
            box-shadow: 0 4px 20px rgba(120, 119, 198, 0.3);
            transform: translateY(-2px);
        }

        .hint-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .hint-count {
            padding: 3px 8px;
            background: rgba(120, 119, 198, 0.3);
            border-radius: 10px;
            font-size: 10px;
            margin-left: auto;
        }

        .hints-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 12px;
        }

        .hint-card {
            padding: 12px;
            border-radius: 10px;
            border: 1px solid;
            background: rgba(120, 119, 198, 0.05);
            animation: fadeInUp 0.4s ease-out both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hint-card.level-1 {
            border-color: rgba(120, 219, 255, 0.4);
            box-shadow: 0 0 15px rgba(120, 219, 255, 0.1);
        }

        .hint-card.level-2 {
            border-color: rgba(255, 119, 198, 0.4);
            box-shadow: 0 0 15px rgba(255, 119, 198, 0.1);
        }

        .hint-card.level-3 {
            border-color: rgba(120, 119, 198, 0.4);
            box-shadow: 0 0 15px rgba(120, 119, 198, 0.1);
        }

        .hint-card-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .hint-level-badge {
            padding: 2px 8px;
            border-radius: 8px;
            font-size: 9px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .level-1 .hint-level-badge {
            background: rgba(120, 219, 255, 0.2);
            color: #78dbff;
            border: 1px solid rgba(120, 219, 255, 0.4);
        }

        .level-2 .hint-level-badge {
            background: rgba(255, 119, 198, 0.2);
            color: #ff77c6;
            border: 1px solid rgba(255, 119, 198, 0.4);
        }

        .level-3 .hint-level-badge {
            background: rgba(120, 119, 198, 0.2);
            color: #7877c6;
            border: 1px solid rgba(120, 119, 198, 0.4);
        }

        .hint-content {
            font-size: 11px;
            line-height: 1.5;
            color: rgba(229, 229, 255, 0.9);
        }

        .hint-content code {
            background: rgba(10, 1, 24, 0.6);
            padding: 2px 4px;
            border-radius: 4px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 10px;
            color: #78dbff;
        }

        .hint-encouragement {
            text-align: center;
            padding: 10px;
            background: rgba(0, 255, 136, 0.05);
            border: 1px solid rgba(0, 255, 136, 0.2);
            border-radius: 8px;
            font-size: 11px;
            color: rgba(229, 229, 255, 0.8);
            margin-top: 10px;
        }

        /* Action Buttons */
        .action-buttons {
            background: rgba(20, 15, 40, 0.85);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 16px;
            padding: 20px;
            backdrop-filter: blur(20px);
            box-shadow:
                0 0 60px rgba(120, 119, 198, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 12px;
        }

        .btn {
            flex: 1;
            padding: 16px 24px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-secondary {
            background: rgba(120, 119, 198, 0.15);
            border: 1px solid rgba(120, 119, 198, 0.4);
            color: #e5e5ff;
        }

        .btn-secondary:hover {
            background: rgba(120, 119, 198, 0.25);
            border-color: rgba(120, 119, 198, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(120, 119, 198, 0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, #7877c6 0%, #ff77c6 100%);
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 30px rgba(120, 119, 198, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow:
                0 4px 30px rgba(120, 119, 198, 0.4),
                0 0 40px rgba(255, 119, 198, 0.3);
        }

        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 1, 24, 0.8);
            backdrop-filter: blur(8px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-overlay.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Feedback Modal */
        .feedback-modal {
            width: 90%;
            max-width: 700px;
            background: rgba(20, 15, 40, 0.95);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 24px;
            padding: 40px;
            backdrop-filter: blur(20px);
            box-shadow:
                0 0 60px rgba(120, 119, 198, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: modalSlideUp 0.4s ease-out;
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 32px;
        }

        .modal-title {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(90deg, #7877c6 0%, #ff77c6 50%, #78dbff 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientFlow 6s linear infinite;
        }

        @keyframes gradientFlow {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }

        .close-modal-btn {
            width: 36px;
            height: 36px;
            border-radius: 12px;
            background: rgba(120, 119, 198, 0.15);
            border: 1px solid rgba(120, 119, 198, 0.3);
            color: #e5e5ff;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-modal-btn:hover {
            background: rgba(120, 119, 198, 0.25);
            transform: scale(1.05);
        }

        .score-section {
            text-align: center;
            margin-bottom: 32px;
            padding: 24px;
            background: rgba(120, 119, 198, 0.08);
            border-radius: 16px;
            border: 1px solid rgba(120, 119, 198, 0.2);
        }

        .score-value {
            font-size: 56px;
            font-weight: 800;
            color: #78dbff;
            text-shadow: 0 0 20px rgba(120, 219, 255, 0.5);
            animation: scorePopIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s both;
        }

        @keyframes scorePopIn {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .score-message {
            font-size: 16px;
            color: rgba(229, 229, 255, 0.8);
            margin-top: 12px;
        }

        .feedback-sections {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 32px;
        }

        .feedback-section h3 {
            font-size: 16px;
            font-weight: 600;
            color: #e5e5ff;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feedback-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .feedback-item {
            padding: 12px 16px;
            background: rgba(120, 119, 198, 0.05);
            border-left: 3px solid #78dbff;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.6;
            color: rgba(229, 229, 255, 0.9);
        }

        .modal-actions {
            display: flex;
            gap: 16px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }

            .question-panel {
                position: relative;
                top: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Status Bar -->
    <div class="status-bar">
        <div class="status-content">
            <div class="progress-section">
                <div class="progress-dots">
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot current"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                </div>
                <span class="progress-text">Question 3 of 5</span>
            </div>

            <div class="timer-section">
                <span>⏱️</span>
                <span class="timer" id="timer">24:35</span>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Left Panel: Question + Hints -->
        <div class="question-panel">
            <!-- Question Card -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">Question 3 of 5</span>
                    <span class="difficulty-badge">Medium</span>
                </div>

                <h1 class="question-title">Two Sum Problem</h1>

                <div class="question-content">
                    Given an array of integers <code>nums</code> and an integer <code>target</code>,
                    return <strong>indices</strong> of the two numbers such that they add up to <code>target</code>.
                    <br><br>
                    You may assume that each input would have <strong>exactly one solution</strong>, and you
                    may not use the same element twice.
                    <br><br>
                    You can return the answer in any order.
                </div>

                <div class="question-section">
                    <div class="section-title">Constraints</div>
                    <ul class="constraints-list">
                        <li>2 ≤ nums.length ≤ 10<sup>4</sup></li>
                        <li>-10<sup>9</sup> ≤ nums[i] ≤ 10<sup>9</sup></li>
                        <li>-10<sup>9</sup> ≤ target ≤ 10<sup>9</sup></li>
                        <li>Only one valid answer exists</li>
                    </ul>
                </div>

                <div class="question-section">
                    <div class="section-title">Examples</div>
                    <div class="example-box">
                        <code><strong>Input:</strong> nums = [2,7,11,15], target = 9</code><br>
                        <code><strong>Output:</strong> [0,1]</code><br>
                        <code><strong>Explanation:</strong> nums[0] + nums[1] = 2 + 7 = 9</code>
                    </div>
                    <div class="example-box">
                        <code><strong>Input:</strong> nums = [3,2,4], target = 6</code><br>
                        <code><strong>Output:</strong> [1,2]</code>
                    </div>
                </div>
            </div>

            <!-- Hints Card -->
            <div class="hints-card" id="hintsCard">
                <div class="hints-header">
                    <h3 class="hints-title">💡 Smart Hints</h3>
                    <span class="hint-count" id="hintCountDisplay">0/3 used</span>
                </div>

                <button class="hint-btn" id="getHintBtn" onclick="requestHint()">
                    <span>💡</span>
                    <span>Get Hint</span>
                </button>

                <div class="hints-list" id="hintsList" style="display: none;">
                    <!-- Hints will be added here dynamically -->
                </div>
            </div>
        </div>

        <!-- Answer Panel -->
        <div class="answer-panel">
            <!-- Editor -->
            <div class="editor-card">
                <div class="editor-header">
                    <span class="editor-label">Your Solution</span>
                    <span class="language-badge">JavaScript</span>
                </div>

                <textarea class="code-editor" id="codeEditor" placeholder="// Write your solution here...
function twoSum(nums, target) {

}">function twoSum(nums, target) {
    // Using nested loops to check all pairs
    for (let i = 0; i < nums.length; i++) {
        for (let j = i + 1; j < nums.length; j++) {
            if (nums[i] + nums[j] === target) {
                return [i, j];
            }
        }
    }
    return [];
}</textarea>

                <div class="editor-footer">
                    <span>💡 Tip: Consider time and space complexity</span>
                    <span id="charCount">127 characters</span>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="btn btn-secondary">
                    ← Previous
                </button>
                <button class="btn btn-primary" onclick="submitAnswer()">
                    Submit Answer →
                </button>
            </div>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div class="modal-overlay" id="feedbackModal">
        <div class="feedback-modal">
            <div class="modal-header">
                <h2 class="modal-title">Answer Evaluation</h2>
                <button class="close-modal-btn" onclick="closeModal()">×</button>
            </div>

            <div class="score-section">
                <div class="score-value">82</div>
                <div class="score-message">Great work! You're on the right track.</div>
            </div>

            <div class="feedback-sections">
                <div class="feedback-section">
                    <h3><span>✓</span> Strengths</h3>
                    <ul class="feedback-list">
                        <li class="feedback-item">Correctly implemented a working solution that handles all test cases</li>
                        <li class="feedback-item">Good edge case handling with the final return statement</li>
                        <li class="feedback-item">Clean, readable code structure</li>
                    </ul>
                </div>

                <div class="feedback-section">
                    <h3><span>↑</span> Areas for Improvement</h3>
                    <ul class="feedback-list">
                        <li class="feedback-item">Current O(n²) time complexity can be optimized to O(n) using a hash map</li>
                        <li class="feedback-item">Consider adding comments explaining your approach</li>
                    </ul>
                </div>

                <div class="feedback-section">
                    <h3><span>💡</span> Suggestions</h3>
                    <ul class="feedback-list">
                        <li class="feedback-item">Try using a hash map to achieve single-pass solution</li>
                        <li class="feedback-item">Include complexity analysis in your answer</li>
                    </ul>
                </div>
            </div>

            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="reviseAnswer()">
                    ↻ Revise Answer
                </button>
                <button class="btn btn-primary" onclick="nextQuestion()">
                    Next Question →
                </button>
            </div>
        </div>
    </div>

    <script>
        // Timer functionality
        let timeLeft = 1475; // 24:35 in seconds
        const timerEl = document.getElementById('timer');

        function updateTimer() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerEl.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

            // Update timer style based on time left
            timerEl.classList.remove('warning', 'critical');
            if (timeLeft < 300 && timeLeft >= 60) {
                timerEl.classList.add('warning');
            } else if (timeLeft < 60) {
                timerEl.classList.add('critical');
            }

            if (timeLeft > 0) {
                timeLeft--;
            }
        }

        setInterval(updateTimer, 1000);

        // Character count
        const codeEditor = document.getElementById('codeEditor');
        const charCountEl = document.getElementById('charCount');

        codeEditor.addEventListener('input', () => {
            const count = codeEditor.value.length;
            charCountEl.textContent = `${count} characters`;
        });

        // Submit answer
        function submitAnswer() {
            document.getElementById('feedbackModal').classList.add('active');
        }

        // Close modal
        function closeModal() {
            document.getElementById('feedbackModal').classList.remove('active');
        }

        // Revise answer
        function reviseAnswer() {
            closeModal();
            codeEditor.focus();
            console.log('Revising answer...');
        }

        // Next question
        function nextQuestion() {
            console.log('Moving to next question...');
            closeModal();
        }

        // Close modal on overlay click
        document.getElementById('feedbackModal').addEventListener('click', (e) => {
            if (e.target.id === 'feedbackModal') {
                closeModal();
            }
        });

        // Hints functionality
        let hintsUsed = 0;
        const maxHints = 3;
        const hints = [
            {
                level: 1,
                title: "General Approach",
                content: "Think about how you might organize data to quickly look up values. What data structure provides O(1) lookup time and could help you find the complement of each number efficiently?"
            },
            {
                level: 2,
                title: "Specific Technique",
                content: "A hash map would be ideal here because it provides O(1) lookup time. As you iterate through the array, you can store each number with its index. For each number, check if <code>target - current_number</code> exists in your hash map."
            },
            {
                level: 3,
                title: "Code Skeleton",
                content: "Use a Map to store numbers as keys and indices as values. In a single loop, calculate <code>complement = target - nums[i]</code>, check if complement exists in the map, and if so return both indices. Otherwise, add the current number to the map."
            }
        ];

        function requestHint() {
            if (hintsUsed >= maxHints) return;

            const hintBtn = document.getElementById('getHintBtn');
            const hintsList = document.getElementById('hintsList');
            const hintCountDisplay = document.getElementById('hintCountDisplay');

            // Add loading state
            hintBtn.disabled = true;
            hintBtn.innerHTML = '<span>⏳</span><span>Loading hint...</span>';

            // Simulate API call
            setTimeout(() => {
                // Add new hint
                const hint = hints[hintsUsed];
                const hintCard = document.createElement('div');
                hintCard.className = `hint-card level-${hint.level}`;
                hintCard.innerHTML = `
                    <div class="hint-card-header">
                        <span class="hint-level-badge">Level ${hint.level}: ${hint.title}</span>
                    </div>
                    <div class="hint-content">${hint.content}</div>
                `;
                hintsList.appendChild(hintCard);
                hintsList.style.display = 'flex';

                hintsUsed++;
                hintCountDisplay.textContent = `${hintsUsed}/${maxHints} used`;

                // Update button state
                if (hintsUsed >= maxHints) {
                    hintBtn.innerHTML = '<span>✓</span><span>All Hints Used</span>';
                    hintBtn.disabled = true;

                    // Add encouragement message
                    const encouragement = document.createElement('div');
                    encouragement.className = 'hint-encouragement';
                    encouragement.innerHTML = '🌟 You\'ve got this! Apply the hints above and give it another try.';
                    hintsList.appendChild(encouragement);
                } else {
                    hintBtn.innerHTML = '<span>💡</span><span>Get Next Hint</span>';
                    hintBtn.disabled = false;
                }

                // Scroll hints into view
                hintCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 800);
        }
    </script>
</body>
</html>

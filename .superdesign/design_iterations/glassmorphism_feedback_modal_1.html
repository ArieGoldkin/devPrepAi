<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevPrep - Feedback Modal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0a0118 0%, #1a0f2e 50%, #0f0a1e 100%);
            color: #e5e5ff;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        /* Animated background */
        body::before {
            content: '';
            position: absolute;
            width: 150%;
            height: 150%;
            background:
                radial-gradient(circle at 20% 30%, rgba(120, 119, 198, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 119, 198, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(120, 219, 255, 0.1) 0%, transparent 50%);
            animation: backgroundFlow 20s ease-in-out infinite;
            z-index: 0;
        }

        @keyframes backgroundFlow {
            0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.9; }
            50% { transform: translate(-20px, 20px) scale(1.05); opacity: 0.95; }
        }

        /* Overlay backdrop */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 1, 24, 0.7);
            backdrop-filter: blur(8px);
            z-index: 10;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Modal container */
        .modal {
            position: relative;
            z-index: 20;
            width: 100%;
            max-width: 700px;
            background: rgba(20, 15, 40, 0.85);
            border: 1px solid rgba(120, 119, 198, 0.3);
            border-radius: 24px;
            padding: 40px;
            backdrop-filter: blur(20px);
            box-shadow:
                0 0 60px rgba(120, 119, 198, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: modalSlideUp 0.4s ease-out;
        }

        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Header */
        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 32px;
        }

        .modal-title {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(90deg, #7877c6 0%, #ff77c6 50%, #78dbff 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientFlow 6s linear infinite;
        }

        @keyframes gradientFlow {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }

        .close-btn {
            width: 36px;
            height: 36px;
            border-radius: 12px;
            background: rgba(120, 119, 198, 0.15);
            border: 1px solid rgba(120, 119, 198, 0.3);
            color: #e5e5ff;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(120, 119, 198, 0.25);
            border-color: rgba(120, 119, 198, 0.5);
            transform: scale(1.05);
        }

        /* Score section */
        .score-section {
            text-align: center;
            margin-bottom: 32px;
            padding: 24px;
            background: rgba(120, 119, 198, 0.08);
            border-radius: 16px;
            border: 1px solid rgba(120, 119, 198, 0.2);
        }

        .score-label {
            font-size: 14px;
            color: rgba(229, 229, 255, 0.7);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .score-value {
            font-size: 56px;
            font-weight: 800;
            line-height: 1;
            margin-bottom: 8px;
            animation: scorePopIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s both;
        }

        @keyframes scorePopIn {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .score-excellent { color: #00ff88; text-shadow: 0 0 20px rgba(0, 255, 136, 0.5); }
        .score-good { color: #78dbff; text-shadow: 0 0 20px rgba(120, 219, 255, 0.5); }
        .score-fair { color: #ffd700; text-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
        .score-poor { color: #ff77c6; text-shadow: 0 0 20px rgba(255, 119, 198, 0.5); }

        .score-message {
            font-size: 16px;
            color: rgba(229, 229, 255, 0.8);
            font-weight: 500;
        }

        .attempt-badge {
            display: inline-block;
            margin-top: 12px;
            padding: 6px 16px;
            background: rgba(120, 119, 198, 0.2);
            border: 1px solid rgba(120, 119, 198, 0.4);
            border-radius: 20px;
            font-size: 13px;
            color: #e5e5ff;
        }

        /* Feedback sections */
        .feedback-section {
            margin-bottom: 24px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .section-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #e5e5ff;
        }

        .feedback-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .feedback-item {
            padding: 14px 18px;
            background: rgba(120, 119, 198, 0.05);
            border-left: 3px solid;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.6;
            color: rgba(229, 229, 255, 0.9);
            animation: slideInLeft 0.4s ease-out both;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .feedback-item:nth-child(1) { animation-delay: 0.1s; }
        .feedback-item:nth-child(2) { animation-delay: 0.2s; }
        .feedback-item:nth-child(3) { animation-delay: 0.3s; }

        .strengths .feedback-item { border-color: #00ff88; }
        .improvements .feedback-item { border-color: #ff77c6; }
        .suggestions .feedback-item { border-color: #78dbff; }

        /* Detailed feedback */
        .detailed-feedback {
            padding: 20px;
            background: rgba(120, 119, 198, 0.08);
            border-radius: 12px;
            border: 1px solid rgba(120, 119, 198, 0.2);
            margin-bottom: 32px;
        }

        .detailed-feedback p {
            font-size: 14px;
            line-height: 1.7;
            color: rgba(229, 229, 255, 0.85);
        }

        /* Action buttons */
        .action-buttons {
            display: flex;
            gap: 16px;
            margin-top: 32px;
        }

        .btn {
            flex: 1;
            padding: 16px 24px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-secondary {
            background: rgba(120, 119, 198, 0.15);
            border: 1px solid rgba(120, 119, 198, 0.4);
            color: #e5e5ff;
        }

        .btn-secondary:hover {
            background: rgba(120, 119, 198, 0.25);
            border-color: rgba(120, 119, 198, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(120, 119, 198, 0.2);
        }

        .btn-secondary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #7877c6 0%, #ff77c6 100%);
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 30px rgba(120, 119, 198, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow:
                0 8px 30px rgba(120, 119, 198, 0.4),
                0 0 40px rgba(255, 119, 198, 0.3);
        }

        .revision-warning {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 16px;
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            margin-top: 16px;
            font-size: 13px;
            color: rgba(229, 229, 255, 0.8);
        }

        .revision-warning-icon {
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="overlay"></div>

    <div class="modal">
        <!-- Header -->
        <div class="modal-header">
            <h2 class="modal-title">Answer Evaluation</h2>
            <button class="close-btn" onclick="closeModal()">×</button>
        </div>

        <!-- Score Section -->
        <div class="score-section">
            <div class="score-label">Your Score</div>
            <div class="score-value score-good" id="scoreValue">82</div>
            <div class="score-message" id="scoreMessage">Great work! You're on the right track.</div>
            <span class="attempt-badge">Attempt 1 of 3</span>
        </div>

        <!-- Strengths -->
        <div class="feedback-section strengths">
            <div class="section-header">
                <span class="section-icon">✓</span>
                <h3 class="section-title">Strengths</h3>
            </div>
            <ul class="feedback-list">
                <li class="feedback-item">Correctly identified the need for a hash map for O(1) lookup time</li>
                <li class="feedback-item">Handled edge cases including empty arrays and duplicate values</li>
                <li class="feedback-item">Clean, readable code with descriptive variable names</li>
            </ul>
        </div>

        <!-- Areas for Improvement -->
        <div class="feedback-section improvements">
            <div class="section-header">
                <span class="section-icon">↑</span>
                <h3 class="section-title">Areas for Improvement</h3>
            </div>
            <ul class="feedback-list">
                <li class="feedback-item">Time complexity could be optimized from O(n²) to O(n) with a single pass</li>
                <li class="feedback-item">Space complexity analysis is missing from your explanation</li>
            </ul>
        </div>

        <!-- Suggestions -->
        <div class="feedback-section suggestions">
            <div class="section-header">
                <span class="section-icon">💡</span>
                <h3 class="section-title">Suggestions</h3>
            </div>
            <ul class="feedback-list">
                <li class="feedback-item">Consider using a Set instead of an array for faster lookups when checking duplicates</li>
                <li class="feedback-item">Add inline comments explaining the logic for each major step</li>
                <li class="feedback-item">Include complexity analysis in your answer to demonstrate understanding</li>
            </ul>
        </div>

        <!-- Detailed Feedback -->
        <div class="detailed-feedback">
            <div class="section-header" style="margin-bottom: 12px;">
                <span class="section-icon">📝</span>
                <h3 class="section-title">Detailed Feedback</h3>
            </div>
            <p>
                Your solution demonstrates a solid understanding of hash maps and their application to this problem.
                The code is clean and handles most edge cases well. However, there's room for optimization in the
                time complexity. Consider how you might solve this problem with a single pass through the array
                instead of nested loops. Also, don't forget to include complexity analysis when answering algorithmic
                questions - it shows deeper understanding of your solution's performance characteristics.
            </p>
        </div>

        <!-- Revision Warning (conditionally shown) -->
        <div class="revision-warning" id="revisionWarning" style="display: none;">
            <span class="revision-warning-icon">⚠️</span>
            <span>This is your final revision attempt. Make it count!</span>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-secondary" id="reviseBtn" onclick="reviseAnswer()">
                ↻ Revise Answer
            </button>
            <button class="btn btn-primary" onclick="nextQuestion()">
                Next Question →
            </button>
        </div>
    </div>

    <script>
        // Update score display based on value
        function updateScoreDisplay(score) {
            const scoreElement = document.getElementById('scoreValue');
            const messageElement = document.getElementById('scoreMessage');

            scoreElement.textContent = score;

            // Remove existing classes
            scoreElement.classList.remove('score-excellent', 'score-good', 'score-fair', 'score-poor');

            // Add appropriate class and message
            if (score >= 90) {
                scoreElement.classList.add('score-excellent');
                messageElement.textContent = 'Excellent! Outstanding performance.';
            } else if (score >= 75) {
                scoreElement.classList.add('score-good');
                messageElement.textContent = 'Great work! You\'re on the right track.';
            } else if (score >= 60) {
                scoreElement.classList.add('score-fair');
                messageElement.textContent = 'Good effort. Review the feedback to improve.';
            } else {
                scoreElement.classList.add('score-poor');
                messageElement.textContent = 'Keep practicing. Focus on the suggestions below.';
            }
        }

        // Update attempt badge and revision warning
        function updateAttemptInfo(attemptNumber, maxAttempts) {
            const badge = document.querySelector('.attempt-badge');
            const warning = document.getElementById('revisionWarning');
            const reviseBtn = document.getElementById('reviseBtn');

            badge.textContent = `Attempt ${attemptNumber} of ${maxAttempts}`;

            // Show warning on last attempt
            if (attemptNumber === maxAttempts - 1) {
                warning.style.display = 'flex';
            }

            // Disable revise button on last attempt
            if (attemptNumber >= maxAttempts) {
                reviseBtn.disabled = true;
                reviseBtn.textContent = 'No Revisions Left';
            }
        }

        function closeModal() {
            document.querySelector('.modal').style.animation = 'modalSlideUp 0.3s ease-out reverse';
            document.querySelector('.overlay').style.animation = 'fadeIn 0.3s ease-out reverse';
            setTimeout(() => {
                console.log('Modal closed');
            }, 300);
        }

        function reviseAnswer() {
            console.log('Revising answer...');
            // Close modal and return to answer editor
        }

        function nextQuestion() {
            console.log('Moving to next question...');
            // Save results and navigate to next question
        }

        // Demo: simulate different score scenarios
        let demoScore = 82;
        let demoAttempt = 1;

        // Uncomment to test different states:
        // updateScoreDisplay(95); // Excellent
        // updateScoreDisplay(82); // Good
        // updateScoreDisplay(68); // Fair
        // updateScoreDisplay(45); // Poor
        // updateAttemptInfo(2, 3); // Show warning
        // updateAttemptInfo(3, 3); // Disable revise
    </script>
</body>
</html>
